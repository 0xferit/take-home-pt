<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Multi-Year Test</title>
</head>
<body>
    <h1>Multi-Year Calculation Test</h1>
    <div id="output"></div>
    
    <script src="data.js"></script>
    <script src="logic.js"></script>
    <script>
        // Test multi-year projection
        console.log('Testing multi-year projection...');
        
        const testParams = {
            structure: 'simplified',
            grossIncomeYear1: 60000,
            annualGrowthRate: 0.05, // 5%
            years: 10,
            baseParams: {
                activityCoefficient: 0.75,
                nhrStatus: 'standard',
                personalDeductions: {health: 0, education: 0, charitable: 0, retirement: 0},
                isFirstYearIRS50pct: false,
                isFirstYearSSExempt: false,
                irsJovemEnabled: true,
                baseExpenses: 3000,
                adminExpenses: 800,
                insuranceExpenses: 360,
                isNHREligible: true,
                dependentsCount: 0,
            }
        };
        
        try {
            const result = window.TakeHomeLogic.computeMultiYearProjection(testParams);
            console.log('✅ Multi-year projection succeeded');
            console.log('Year 1:', result.yearByYear[0]);
            console.log('Year 10:', result.yearByYear[9]);
            console.log('Totals:', result.totals);
            console.log('NPV:', result.npv);
            
            document.getElementById('output').innerHTML = `
                <h2>✅ Test Passed</h2>
                <h3>Year 1</h3>
                <p>Income: €${result.yearByYear[0].income.toLocaleString()}</p>
                <p>Net: €${result.yearByYear[0].netIncome.toLocaleString()}</p>
                <p>IRS Jovem Reduction: €${result.yearByYear[0].irsJovemReduction.toLocaleString()}</p>
                
                <h3>Year 10</h3>
                <p>Income: €${result.yearByYear[9].income.toLocaleString()}</p>
                <p>Net: €${result.yearByYear[9].netIncome.toLocaleString()}</p>
                <p>IRS Jovem Reduction: €${result.yearByYear[9].irsJovemReduction.toLocaleString()}</p>
                
                <h3>10-Year Totals</h3>
                <p>Total Gross: €${result.totals.totalGrossIncome.toLocaleString()}</p>
                <p>Total Net: €${result.totals.totalNetIncome.toLocaleString()}</p>
                <p>Total IRS Jovem Savings: €${result.totals.totalIrsJovemSavings.toLocaleString()}</p>
                <p>NPV: €${result.npv.toLocaleString()}</p>
            `;
        } catch (error) {
            console.error('❌ Test failed:', error);
            document.getElementById('output').innerHTML = `
                <h2>❌ Test Failed</h2>
                <pre>${error.stack}</pre>
            `;
        }
    </script>
</body>
</html>
